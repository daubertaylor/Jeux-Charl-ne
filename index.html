<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy [Son Prénom]!</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #87CEEB; /* Ciel bleu */
            font-family: Arial, sans-serif;
            color: white;
            text-shadow: 2px 2px 4px #000000;
        }

        #game-title {
            font-size: 3em;
            margin-bottom: 20px;
        }

        #game-container {
            border: 5px solid #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            background-color: #70c5ce;
        }

        #game-canvas {
            background-image: url('assets/background.png'); /* À remplacer par votre image de fond */
            background-size: cover;
        }

        #score-container {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1 id="game-title">Flappy [Son Prénom]!</h1>
    <div id="game-container">
        <canvas id="game-canvas" width="320" height="480"></canvas>
    </div>
    <div id="score-container">
        Score: <span id="score-display">0</span>
    </div>

    <script>
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');

        let birdImg = new Image();
        birdImg.src = 'assets/bird.png'; // À remplacer par votre image d'oiseau/personnage

        let pipeImg = new Image();
        pipeImg.src = 'assets/pipe.png'; // À remplacer par votre image de tuyau/obstacle

        // Variables du jeu
        let bird = { x: 50, y: 150, width: 30, height: 30, gravity: 0.2, velocity: 0, jumpPower: -5 };
        let pipes = [];
        let score = 0;
        let isGameOver = false;

        // Dessiner l'oiseau
        function drawBird() {
            ctx.drawImage(birdImg, bird.x, bird.y, bird.width, bird.height);
        }

        // Dessiner les tuyaux
        function drawPipes() {
            pipes.forEach(pipe => {
                ctx.drawImage(pipeImg, pipe.x, 0, pipe.width, pipe.top);
                ctx.drawImage(pipeImg, pipe.x, pipe.bottom, pipe.width, canvas.height - pipe.bottom);
            });
        }

        // Mettre à jour la physique et les positions
        function update() {
            if (isGameOver) return;

            // Mise à jour de l'oiseau
            bird.velocity += bird.gravity;
            bird.y += bird.velocity;

            // Déplacer les tuyaux
            pipes.forEach(pipe => {
                pipe.x -= 2;
            });

            // Générer de nouveaux tuyaux
            if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - 150) {
                let gap = Math.floor(Math.random() * (canvas.height / 2)) + 50;
                let topHeight = Math.floor(Math.random() * (canvas.height - gap - 100)) + 50;
                pipes.push({
                    x: canvas.width,
                    width: 50,
                    top: topHeight,
                    bottom: topHeight + gap,
                    passed: false
                });
            }

            // Supprimer les tuyaux qui sont sortis de l'écran
            pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);

            // Vérifier les collisions
            checkCollisions();
            // Vérifier le score
            checkScore();
        }

        // Vérifier les collisions
        function checkCollisions() {
            // Collision avec le haut ou le bas
            if (bird.y + bird.height > canvas.height || bird.y < 0) {
                endGame();
            }
            // Collision avec les tuyaux
            pipes.forEach(pipe => {
                if (bird.x < pipe.x + pipe.width && bird.x + bird.width > pipe.x &&
                    (bird.y < pipe.top || bird.y + bird.height > pipe.bottom)) {
                    endGame();
                }
            });
        }

        // Augmenter le score
        function checkScore() {
            pipes.forEach(pipe => {
                if (pipe.x + pipe.width < bird.x && !pipe.passed) {
                    score++;
                    document.getElementById('score-display').innerText = score;
                    pipe.passed = true;
                }
            });
        }

        // Fin du jeu
        function endGame() {
            isGameOver = true;
            alert("Game Over! Ton score est de " + score + ". C'est super, mais pas autant que toi !");
            document.location.reload(); // Recharger la page pour recommencer
        }

        // Gérer les sauts
        function flap() {
            if (!isGameOver) {
                bird.velocity = bird.jumpPower;
            }
        }

        // Écouter les clics ou les touches
        document.addEventListener('click', flap);
        document.addEventListener('keydown', e => {
            if (e.code === 'Space' || e.code === 'ArrowUp') {
                flap();
            }
        });

        // Boucle principale du jeu
        function gameLoop() {
            // Effacer l'écran
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            update();
            drawPipes();
            drawBird();
            requestAnimationFrame(gameLoop);
        }

        // Démarrer le jeu
        birdImg.onload = () => {
            pipeImg.onload = () => {
                gameLoop();
            };
        };
    </script>
</body>
</html>
